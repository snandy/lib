<!doctype html>
<html>
<head>
    <title>Matrix</title>
    <meta charset="utf-8">
	<style>
		#output {
			width: 500px;
			height: 400px;
			overflow: auto;
		}
		td {
            width:30px;
            height:30px;
            text-align:center;
        }
	</style>
</head>
<body>
    <label for="integer">Input an integer:</label>
    <input id="integer"/>
    <br/><br/>
    <h4>Output</h4>
    <div id="output" style="border:1px solid gray;">...</div>
<script>

var m = 5;  
var map= makeArray(m);
var ct = getCenter(m); //中心点

var zs = [], ys = [], zx=[], yx=[];
//先算出四角方向的所有数值
for (var i=0; i<=ct; i++){
    var zb = [ct,ct];
    //左上
    zs.unshift((i*2)*(i*2)+i*2);
    //左下
    zx.unshift((i*2)*(i*2));
    //右上
    ys.unshift((i*2+1)*(i*2+1)-1)
    //右下
    if (i!==ct) yx.unshift((i*2+1)*(i*2+1)+(i*2+1));
}
//根据四角的数字，去计算中间数值
//上角
for (var i=0; i<=m-ct; i++){
    var x = zs[i];
    for (var n=i; n<m-i; n++){
        map[i][n]= x++;
    }
}
//下角
var y=0
for (var i=m-1; i>=m-ct; i--){
    var x = zx[y];
    y++
    for (var n = m-i-1; n <= i; n++){
        map[i][n] = x--;
    }
}
//左
for (var i=0; i<=m-ct; i++){
    var x = zs[i];
    for (var n=i; n<m-i; n++){
        map[n][i]= x--;
    }
}
//右
var y=0;
for (var i=m-1; i>=m-ct; i--){
    var x = yx[y];
    y++
    for (var n = i; n >= m-i; n--){
        map[n][i]= x--;
    }
}

//输出
h='<table>';
for (var i=0; i<m; i++){
    h+='</tr>';
    for (var n=0; n<m; n++){
        h+='<td>';
        h+=map[i][n];
        h+='</td>';
    }
    h+='</tr>';
}
h+='</table>';
document.write(h)
    
function getCenter(m){
    return parseInt( m/2, 10 );
}
function makeArray (m,n){
    var m = m || 1,n = n||m,a=[];
    for (var i=0; i<m; i++){
        a[i]=new Array(m);
    }
    return a;
}

</script>
</body>
</html>
