<!DOCTYPE HTML>
<html> 
<head> 
	<meta charset="utf-8"> 
	<title>window.name方式跨域</title>
</head> 
<body>
<input type="button" value="Get Name 1" onclick="clk1()"/>
<input type="button" value="Get Name 2" onclick="clk2()"/>
<script type="text/javascript">
	window.name = '来自 window.name1.html 的数据';
	function clk1() {
		// location.href = 'window.name2.html';	
		location.href = 'http://snandy.sinaapp.com/corss/window.name2.html';	
	}
	function clk2() {
		getData('http://snandy.sinaapp.com/corss/data.html', function(str) {
			alert(str)
		})
	}

	function getData(url, callback) {
		var ifr = document.createElement('iframe')
		ifr.src = url
		document.body.appendChild(ifr)
		setTimeout(function() {
			ifr.src = 'about:blank'
			ifr.onload = function() {
				var win = ifr.contentWindow
				callback(win.name)
			}			
			document.body.removeChild(ifr)
		}, 2000)		
	}
</script>
</body>
</html>

